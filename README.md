# 学習タイマーアプリ

コマンドライン上で動作する、シンプルなポモドーロタイマーです。
25分集中＋5分休憩を繰り返します。フェーズの切り替わり時にビープ音で通知します。
作業ログを自動記録し、CSV ファイルに保存できます。

## 表示イメージ

```text
作業名を入力してください: ClaudeCodeの使い方に関する学習

操作: [s]開始  [p]一時停止/再開  [l]ログ保存  [q]終了
[集中] 24:35 🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩
```

## セットアップ

```bash
# 仮想環境を作成（初回のみ）
python -m venv .venv

# 依存パッケージをインストール
.venv/Scripts/pip.exe install pytest ruff
```

## 起動方法

```bash
.venv/Scripts/python.exe -m timer.app
```

起動後、作業名を入力して Enter を押すとタイマー画面になります。

## 操作方法

| キー | 動作 |
| --- | --- |
| `s` | 開始 |
| `p` | 一時停止 / 再開 |
| `l` | ログを CSV ファイルに保存 |
| `q` | 終了 |

## ログ保存

`l` キーを押すと、プロジェクトルートに `log_YYYYMMDD_HHMM.csv` が生成されます。

```text
start, finish, title
9:01, 9:26, ClaudeCodeの使い方に関する学習
9:26, 9:31, 休憩
9:31, 9:40, ClaudeCodeの使い方に関する学習
9:40, 9:42, 一時停止・再開
9:42, 9:58, ClaudeCodeの使い方に関する学習
9:58, 9:59, 休憩
9:59, 9:59, 終了
```

- `l` キーは何度でも押せます。押すたびに新しいファイルが生成されます。
- 進行中のセッションは、その時点の時刻を終了時刻として保存されます。

## 音声通知

| タイミング | 音 |
| --- | --- |
| 集中終了（→休憩へ） | 低音ビープ（500Hz） |
| 休憩終了（→集中へ） | 高音ビープ（1000Hz） |

## 開発用コマンド

```bash
# テスト実行
.venv/Scripts/pytest.exe -v

# リンター
.venv/Scripts/ruff.exe check .
```

## ファイル構成

```text
├── timer/
│   ├── state.py     # データ層: タイマーの状態管理
│   ├── logger.py    # ログ層: イベント記録と CSV 保存
│   ├── display.py   # UI層: コマンドラインへの表示・入力
│   └── app.py       # 制御層: キー入力とメインループ
└── tests/
    ├── test_state.py
    ├── test_display.py
    ├── test_app.py
    └── test_logger.py
```
